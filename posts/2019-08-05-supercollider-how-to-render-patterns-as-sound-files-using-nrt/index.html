<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        SuperCollider tutorial: Easily render generative compositions as sound files using NRT ::
        Mads Kjeldgaard — Composer and developer
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="One of the many powerful features of SuperCollider is it’s ability to render sounds offline. This is called Non-Realtime Synthesis (NRT). NRT is for example useful for fast, offline processing of sounds, doing sound analysis or rendering generative compositions.
NRT works like this (normally): First you write a list of server OSC messages (stored in a Score usually) which will tell the (offline) server what to do at what point in time when you decide to render it."
/>
<meta
  name="keywords"
  content="computer music, supercollider, rust, vim, linux"
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="http://madskjeldgaard.dk/posts/2019-08-05-supercollider-how-to-render-patterns-as-sound-files-using-nrt/" />





<link rel="stylesheet" href="http://madskjeldgaard.dk/assets/style.css" />

<link rel="stylesheet" href="http://madskjeldgaard.dk/style.css" />


<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="http://madskjeldgaard.dk/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="http://madskjeldgaard.dk/img/favicon.png" />


<link href="http://madskjeldgaard.dk/assets/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">


<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://madskjeldgaard.dk/img/small/supercollider-laptop-room.jpg"/>

<meta name="twitter:title" content="SuperCollider tutorial: Easily render generative compositions as sound files using NRT"/>
<meta name="twitter:description" content="One of the many powerful features of SuperCollider is it’s ability to render sounds offline. This is called Non-Realtime Synthesis (NRT). NRT is for example useful for fast, offline processing of sounds, doing sound analysis or rendering generative compositions.
NRT works like this (normally): First you write a list of server OSC messages (stored in a Score usually) which will tell the (offline) server what to do at what point in time when you decide to render it."/>



<meta property="og:title" content="SuperCollider tutorial: Easily render generative compositions as sound files using NRT" />
<meta property="og:description" content="One of the many powerful features of SuperCollider is it’s ability to render sounds offline. This is called Non-Realtime Synthesis (NRT). NRT is for example useful for fast, offline processing of sounds, doing sound analysis or rendering generative compositions.
NRT works like this (normally): First you write a list of server OSC messages (stored in a Score usually) which will tell the (offline) server what to do at what point in time when you decide to render it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://madskjeldgaard.dk/posts/2019-08-05-supercollider-how-to-render-patterns-as-sound-files-using-nrt/" /><meta property="og:image" content="http://madskjeldgaard.dk/img/small/supercollider-laptop-room.jpg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-05T17:46:09+00:00" />
<meta property="article:modified_time" content="2019-08-05T17:46:09+00:00" /><meta property="og:site_name" content="Mads Kjeldgaard" />







  </head>
  <body class="dark-theme">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >madskjeldgaard</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/pages/about">about</a></li>
        
      
        
          <li><a href="/pages/contact">contact</a></li>
        
      
        
          <li><a href="/posts">posts</a></li>
        
      
        
          <li><a href="/pages/software">software</a></li>
        
      
        
          <li><a href="/pages/work">sound</a></li>
        
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/pages/about">about</a></li>
      
    
      
        <li><a href="/pages/contact">contact</a></li>
      
    
      
        <li><a href="/posts">posts</a></li>
      
    
      
        <li><a href="/pages/software">software</a></li>
      
    
      
        <li><a href="/pages/work">sound</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title">SuperCollider tutorial: Easily render generative compositions as sound files using NRT</h1>
    <div class="post-meta">
      
        <span class="post-date">
          2019-08-05
        </span>

        
          
        
      

      
        <span class="post-author"
          >— Written by mads</span
        >


      
    </div>

    
      <span class="post-tags">
        
          <a href="http://madskjeldgaard.dk/tags/tutorial/">#tutorial</a>&nbsp;
        
          <a href="http://madskjeldgaard.dk/tags/supercollider/">#supercollider</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      
      <p><img src="/wp-content/uploads/2019/08/supercollider-laptop-room-e1566211773173.jpg" alt="alt"></p>
<p>One of the many powerful features of SuperCollider is it’s ability to render sounds offline. This is called <a href="http://doc.sccode.org/Guides/Non-Realtime-Synthesis.html">Non-Realtime Synthesis (NRT)</a>. NRT is for example useful for fast, offline processing of sounds, doing sound analysis or rendering generative compositions.</p>
<p>NRT works like this (normally): First you write a list of server OSC messages (stored in a <a href="http://doc.sccode.org/Classes/Score.html">Score</a> usually) which will tell the (offline) server what to do at what point in time when you decide to render it. These are in the format [beat, [osc_command]]. An example: Making a Synth using synthdef \boring_sine at beat number 2 looks like this in such a OSC form: [2.0, [\s_new, \boring_sine, 1001, 0, 0]]</p>
<p>All of the possible server osc message commands are documented here: <a href="http://doc.sccode.org/Reference/Server-Command-Reference.html">Server Command Reference</a></p>
<p>Creating such a list manually is naturally time consuming and does not feel very smart. It is also a very awkward way of writing music.</p>
<p>Fortunately, there are ways of doing this in a more efficient and musical way.</p>
<h1 id="recording-event-patterns">
  Recording event patterns
  <a href="#recording-event-patterns" class="h-anchor" aria-hidden="true">#</a>
</h1>
<p>One of my favourite techniques is to simply convert Event Patterns (such as Pbind, Pmono, etc.) to scores using the .asScore method.</p>
<p>The process can be divided into the following steps:</p>
<ol>
<li>
<p>Make a SynthDef and store it on your system using .store</p>
</li>
<li>
<p>Write an event pattern</p>
</li>
<li>
<p>Convert the event pattern to a Score object using .asScore</p>
</li>
<li>
<p>Render the Score to a sound file on your system</p>
</li>
</ol>
<p>First step is to make a SynthDef. SynthDefs are sort of recipes for sound patches that the server uses to make sound. In this case, it will be a very boring sine, aptly named \boring_sine. Note the use of the .store method here. This will save the synthdef as a file on your system and make it available to the NRT process later on.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">SynthDef</span>.<span style="color:#66d9ef">new</span>(<span style="color:#960050;background-color:#1e0010">\</span><span style="color:#a6e22e">boring_sine</span>, {<span style="color:#f92672">|</span><span style="color:#a6e22e">freq</span>, <span style="color:#a6e22e">dur</span><span style="color:#f92672">|</span>
<span style="color:#75715e">// A percussive envelope
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">env</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">EnvGen</span>.<span style="color:#a6e22e">ar</span>(<span style="color:#a6e22e">Env</span>.<span style="color:#a6e22e">perc</span>, <span style="color:#a6e22e">gate</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">timeScale</span><span style="color:#f92672">:</span><span style="color:#a6e22e">dur</span>);

<span style="color:#75715e">// A sine wave
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sig</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">SinOsc</span>.<span style="color:#a6e22e">ar</span>(<span style="color:#a6e22e">freq</span>);

<span style="color:#75715e">// Apply envelope to sine wave and output
</span><span style="color:#75715e"></span><span style="color:#a6e22e">Out</span>.<span style="color:#a6e22e">ar</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">env</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">sig</span>)
}).<span style="color:#a6e22e">store</span>;
</code></pre></div><p>We will keep the pattern super simple: Random scale degrees played using our \boring_sine synth, each of which a quarter of beat in duration.</p>
<p>The total duration of the pattern will be infinite for now (the length of this will automatically be truncated by the Score conversion process).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Pbind</span>(
<span style="color:#960050;background-color:#1e0010">\</span><span style="color:#a6e22e">instrument</span>, <span style="color:#960050;background-color:#1e0010">\</span><span style="color:#a6e22e">boring_sine</span>,
<span style="color:#960050;background-color:#1e0010">\</span><span style="color:#a6e22e">dur</span>, <span style="color:#ae81ff">0.25</span>,
<span style="color:#960050;background-color:#1e0010">\</span><span style="color:#a6e22e">degree</span>, <span style="color:#a6e22e">Pwhite</span>(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">10</span>)
);
</code></pre></div><p>And now, let us convert this to a score:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">asScore</span>(<span style="color:#ae81ff">60</span>); <span style="color:#75715e">// Duration of 60 beats
</span></code></pre></div><p>Finally, we render the score</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">(
<span style="color:#75715e">// Destination path and file name
</span><span style="color:#75715e"></span><span style="color:#f92672">~</span><span style="color:#a6e22e">outFile</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;~/Desktop/yo.wav&#34;</span>;

<span style="color:#75715e">// Render the score as wav file
</span><span style="color:#75715e"></span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">recordNRT</span>(<span style="color:#a6e22e">outputFilePath</span><span style="color:#f92672">:</span> <span style="color:#f92672">~</span><span style="color:#a6e22e">outFile</span>.<span style="color:#a6e22e">asAbsolutePath</span>, <span style="color:#a6e22e">headerFormat</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;WAV&#34;</span>);
)
</code></pre></div><h1 id="lets-make-this-interesting-iteration">
  Lets make this interesting: Iteration
  <a href="#lets-make-this-interesting-iteration" class="h-anchor" aria-hidden="true">#</a>
</h1>
<p><a href="https://www.madskjeldgaard.dk/wp-content/uploads/2019/08/sc-render-chopped2.png"><!-- raw HTML omitted --></a></p>
<p>Rendering one random melody is quite nice, but let us exploit the fact that our pattern chooses random scale degrees every time we play it and combine that functionality with iteration to make 10 (or any number) of rendered random melodies.</p>
<p>First, let us wrap what we wrote up until this point in a function that we can call as often as we want.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">~</span><span style="color:#a6e22e">renderMelody</span> <span style="color:#f92672">=</span> { <span style="color:#f92672">|</span><span style="color:#a6e22e">pattern</span>, <span style="color:#a6e22e">destinationPath</span><span style="color:#f92672">|</span>

<span style="color:#75715e">// Convert pattern to score
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">patscore</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pattern</span>.<span style="color:#a6e22e">asScore</span>(<span style="color:#ae81ff">60</span>); <span style="color:#75715e">// Duration of 60 beats
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// Render the score as a wav file
</span><span style="color:#75715e"></span><span style="color:#a6e22e">patscore</span>.<span style="color:#a6e22e">recordNRT</span>(<span style="color:#a6e22e">outputFilePath</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">destinationPath</span>.<span style="color:#a6e22e">asAbsolutePath</span>, <span style="color:#a6e22e">headerFormat</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;WAV&#34;</span>);
};
</code></pre></div><p>Let us keep the pattern as is</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Pbind</span>(
<span style="color:#960050;background-color:#1e0010">\</span><span style="color:#a6e22e">instrument</span>, <span style="color:#960050;background-color:#1e0010">\</span><span style="color:#a6e22e">boring_sine</span>,
<span style="color:#960050;background-color:#1e0010">\</span><span style="color:#a6e22e">dur</span>, <span style="color:#ae81ff">0.25</span>,
<span style="color:#960050;background-color:#1e0010">\</span><span style="color:#a6e22e">degree</span>, <span style="color:#a6e22e">Pwhite</span>(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">10</span>)
);
</code></pre></div><p>And then render 10 versions of it</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Now make 10 different melodies and save them to your desktop as wave files
</span><span style="color:#75715e"></span><span style="color:#ae81ff">10.</span><span style="color:#66d9ef">do</span>{<span style="color:#f92672">|</span><span style="color:#a6e22e">index</span><span style="color:#f92672">|</span>
<span style="color:#f92672">~</span><span style="color:#a6e22e">renderMelody</span>.<span style="color:#a6e22e">value</span>(<span style="color:#a6e22e">p</span>, <span style="color:#e6db74">&#34;~/Desktop/boringMelody&#34;</span> <span style="color:#f92672">++</span> <span style="color:#a6e22e">index</span> <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34;.wav&#34;</span>);
};
</code></pre></div>
    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Read other posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="http://madskjeldgaard.dk/posts/2019-08-19-supercollider-tutorial-mass-producing-synthdefs/">
                  <span class="button__icon">←</span>
                  <span class="button__text">SuperCollider tutorial: Mass producing SynthDefs</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="http://madskjeldgaard.dk/posts/master-volume/">
                  <span class="button__text">A midi controller in a box of screws</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >madskjeldgaard</span
    >
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
        <span
          >© 2022 Powered by
          <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span
        >
        <span
          >Theme created by
          <a href="https://twitter.com/panr" target="_blank" rel="noopener">panr</a></span
        >
      </div>
    
  </div>
</footer>

<script src="http://madskjeldgaard.dk/assets/main.js"></script>
<script src="http://madskjeldgaard.dk/assets/prism.js"></script>


      
    </div>

    
  </body>
</html>
