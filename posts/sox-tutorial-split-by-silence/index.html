<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        SoX tutorial: Split by silence ::
        Mads Kjeldgaard — Composer and developer
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="SoX has a very effective and rather precise way of semi-automatically chopping a sound file into smaller sound files.
Let us say you have a sound file containing many different sounds seperated by a bit of silence in between. It could be a series of drum hits that you have recorded off of a drum machine. To make these sounds easy to use, you most probably need them as seperate sound files so you can load them into a sampler or other software as a sample bank of sorts."
/>
<meta
  name="keywords"
  content="computer music, supercollider, rust, vim, linux"
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="http://madskjeldgaard.dk/posts/sox-tutorial-split-by-silence/" />





<link rel="stylesheet" href="http://madskjeldgaard.dk/assets/style.css" />

<link rel="stylesheet" href="http://madskjeldgaard.dk/style.css" />


<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="http://madskjeldgaard.dk/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="http://madskjeldgaard.dk/img/favicon.png" />


<link href="http://madskjeldgaard.dk/assets/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="http://madskjeldgaard.dk/assets/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">


<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://madskjeldgaard.dk/img/small/states-of-emergency.jpg"/>

<meta name="twitter:title" content="SoX tutorial: Split by silence"/>
<meta name="twitter:description" content="SoX has a very effective and rather precise way of semi-automatically chopping a sound file into smaller sound files.
Let us say you have a sound file containing many different sounds seperated by a bit of silence in between. It could be a series of drum hits that you have recorded off of a drum machine. To make these sounds easy to use, you most probably need them as seperate sound files so you can load them into a sampler or other software as a sample bank of sorts."/>



<meta property="og:title" content="SoX tutorial: Split by silence" />
<meta property="og:description" content="SoX has a very effective and rather precise way of semi-automatically chopping a sound file into smaller sound files.
Let us say you have a sound file containing many different sounds seperated by a bit of silence in between. It could be a series of drum hits that you have recorded off of a drum machine. To make these sounds easy to use, you most probably need them as seperate sound files so you can load them into a sampler or other software as a sample bank of sorts." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://madskjeldgaard.dk/posts/sox-tutorial-split-by-silence/" /><meta property="og:image" content="http://madskjeldgaard.dk/img/small/states-of-emergency.jpg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-26T01:07:33+02:00" />
<meta property="article:modified_time" content="2020-04-26T01:07:33+02:00" /><meta property="og:site_name" content="Mads Kjeldgaard" />







  </head>
  <body class="dark-theme">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >madskjeldgaard</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/pages/about">about</a></li>
        
      
        
          <li><a href="/pages/contact">contact</a></li>
        
      
        
          <li><a href="/posts">posts</a></li>
        
      
        
          <li><a href="/pages/software">software</a></li>
        
      
        
          <li><a href="/pages/work">sound</a></li>
        
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/pages/about">about</a></li>
      
    
      
        <li><a href="/pages/contact">contact</a></li>
      
    
      
        <li><a href="/posts">posts</a></li>
      
    
      
        <li><a href="/pages/software">software</a></li>
      
    
      
        <li><a href="/pages/work">sound</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title">SoX tutorial: Split by silence</h1>
    <div class="post-meta">
      
        <span class="post-date">
          2020-04-26
        </span>

        
          
        
      

      


      
    </div>

    
      <span class="post-tags">
        
          <a href="http://madskjeldgaard.dk/tags/sox/">#sox</a>&nbsp;
        
          <a href="http://madskjeldgaard.dk/tags/tutorial/">#tutorial</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      
        
        <h2>Table of Contents</h2>
        <aside class="table-of-contents"><nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-silence">What is silence</a></li>
    <li><a href="#trimming-silence-from-beginning-and-end-of-one-file">Trimming silence from beginning and end of one file</a></li>
    <li><a href="#chaining-pseudo-effects">Chaining (pseudo) effects</a></li>
    <li><a href="#chopping-three-bursts">Chopping three bursts</a></li>
  </ul>
</nav></aside>
        
      
      <p>SoX has a very effective and rather precise way of semi-automatically chopping a sound file into smaller sound files.</p>
<p>Let us say you have a sound file containing many different sounds seperated by a bit of silence in between. It could be a series of drum hits that you have recorded off of a drum machine. To make these sounds easy to use, you most probably need them as seperate sound files so you can load them into a sampler or other software as a sample bank of sorts.</p>
<p>In SoX we can approach this problem quite simply: Split the input file (the long file containing many different sounds in sequence) by detecting the silence in between the sounds.</p>
<p>To do this we need to use the <code>silence</code> effect in SoX, which I will explain in a bit more detail since it is an important one and it&rsquo;s syntax is a bit esoteric to say the least.</p>
<h2 id="what-is-silence">
  What is silence
  <a href="#what-is-silence" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>In the manual, <code>silence</code> is defined like this:</p>
<p>&ldquo;Removes silence from the beginning, middle, or end of the audio. &lsquo;Silence&rsquo; is determined by a specified threshold.&rdquo;</p>
<p><code>silence</code> takes a range of optional arguments but we will only use the first three of them:</p>
<p>• above-periods - indicate if audio should be trimmed at the begnning of the audio. 0 = no silence trimmed from beginning, 1 = trim silence from beginning
• duration - amount of time in seconds that non-silence must be detected before it stops trimming audio
• threshold - audio threshold, we will indicate this in percentages</p>
<p>The parameters are stringed together after the <code>silence</code> keyword in the sox command like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sox infile.wav outfile.wav silence above-periods duration threshold
</code></pre></div><h2 id="trimming-silence-from-beginning-and-end-of-one-file">
  Trimming silence from beginning and end of one file
  <a href="#trimming-silence-from-beginning-and-end-of-one-file" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>To trim the beginning of a file until the audio is above 1% in volume for more than 0.1 seconds, you would write a command like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sox infile.wav outfile.wav silence <span style="color:#ae81ff">1</span> 0.1 1%
</code></pre></div><p>To trim the ending as well, we basically repeat the parameters like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sox infile.wav outfile.wav silence <span style="color:#ae81ff">1</span> 0.1 1% <span style="color:#ae81ff">1</span> 0.1 1%
</code></pre></div><h2 id="chaining-pseudo-effects">
  Chaining (pseudo) effects
  <a href="#chaining-pseudo-effects" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>This is all good and well, but we want to produce a sample bank from one input audio file. To do this we need to make use of SoX' ability to chain effects chains after eachother and enter into &ldquo;multiple output file mode&rdquo;.</p>
<p>From the manual: &ldquo;In multiple output mode, a new file is created when the effects prior to the &lsquo;newfile&rsquo; indicate they are done. The effects chain listed after &lsquo;newfile&rsquo; is then started up and its output is saved to the new file.&rdquo;</p>
<p>An effects chain can thus be chained after another using a colon <code>:</code>. Now instead of manually writing out the silence effect and it&rsquo;s parameters for each bit we want to extract from the sound file, we can make the process automatically restart each time it has detected a bit of sound by silence</p>
<p>To do this we need to chain the <code>restart</code> pseudoeffect at the end of our command. This will make the process create a new file from the bit it detected by silence, then restart the process from where it left off and repeat until it reaches the end of the file. Kind of like slicing off bits of a (sound) sausage from left to right.</p>
<p>Our final command for chopping files by silence will then end up looking like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sox infile.wav outfile.wav silence <span style="color:#ae81ff">1</span> 0.1 1% <span style="color:#ae81ff">1</span> 0.1 1% : newfile : restart
</code></pre></div><h2 id="chopping-three-bursts">
  Chopping three bursts
  <a href="#chopping-three-bursts" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p><img src="/img/small/threebursts.png" alt="alt"></p>
<p>As an example of the above, let us have a look at a sound file containing three short noise bursts.</p>
<p>The sound file is called threebursts.wav and can be <a href="/audio/threebursts.wav">downloaded here</a>.</p>
<p>To split the soundfile into three seperate files containing the bursts (without the silence in between), we simply execute the command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sox threebursts.wav burst_num.wav silence <span style="color:#ae81ff">1</span> 0.1 1% <span style="color:#ae81ff">1</span> 0.1 1% : newfile : restart
</code></pre></div><p>which will produce sound files called &ldquo;burst_num001.wav&rdquo;, &ldquo;burst_num002.wav&rdquo; etc.</p>
<p>Now this works very well for our very unnatural example here, but I encourage you to mess around with the parameters when you do this on your own with your own files. Change the threshold to 5% for example if it&rsquo;s noisy or set the duration to something higher if it results in too many small files.</p>
<p>Note: Sometimes on some systems this command will produce an extra audio file containing nothing. I honestly have no idea why. Just delete the file (or send me an email if you have a solution to this problem)</p>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Read other posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="http://madskjeldgaard.dk/posts/sox-tutorial-batch-processing/">
                  <span class="button__icon">←</span>
                  <span class="button__text">SoX tutorial: Batch processing audio on the command line</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="http://madskjeldgaard.dk/posts/sox-tutorial-cli-tape-music/">
                  <span class="button__text">SoX tutorial: Command line tape music (an introduction)</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >madskjeldgaard</span
    >
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
        <span
          >© 2022 Powered by
          <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span
        >
        <span
          >Theme created by
          <a href="https://twitter.com/panr" target="_blank" rel="noopener">panr</a></span
        >
      </div>
    
  </div>
</footer>

<script src="http://madskjeldgaard.dk/assets/main.js"></script>
<script src="http://madskjeldgaard.dk/assets/prism.js"></script>


      
    </div>

    
  </body>
</html>
